<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

</head>
<body>
    <script>
        (async()=>{
            const response = await fetch('https://shrouded-brushlands-49939.herokuapp.com/api/v1/categories');
            const data = await response.json();
            console.log(data);
            const table = document.getElementById("productos");

            data.forEach((e,i) => {    //< ---  recorremos data

                let tr = document.createElement("tr"); //< ---  creamos una fila

                let td = document.createElement("td"); //< ---  Hacemos columna index dentro de la fila
                td.classList.add("index");
                td.innerHTML = i;
                tr.appendChild(td); //< --- Agregamos la columna en la fila

              
                for (p in e) {  //< ---  recorremos cada propiedad de cada elemento

                let td = document.createElement("td"); //< ---  Hacemos columna dentro de la fila
                td.classList.add(p);//<-- le podemos agregar a toda la columna la misma clase
                td.innerHTML = e[p]; 

                tr.appendChild(td); //< --- Agregamos la columna en la fila

                }

               //ver fila en api

               let td1 = document.createElement("td")
                var form = document.createElement("form");
                form.setAttribute("method", "get");
                form.setAttribute("action", `https://shrouded-brushlands-49939.herokuapp.com/api/v1/cartegories/${e.id}`)
                
                let button = document.createElement("button")
                button.type = "submit"
                button.className = "btn btn-primary"
                button.innerHTML = "Ver categoria"

                form.appendChild(button)
    
                td1.appendChild(form)

                tr.appendChild(td1)

                //actualizar fila 

                let td2 = document.createElement("td")
                var formact = document.createElement("form");
                formact.setAttribute("method", "delete");
                formact.setAttribute("action", `https://shrouded-brushlands-49939.herokuapp.com/api/v1/categories/${e.id}`)
                let buttonact = document.createElement("button")
                buttonact.type = "submit"
                buttonact.className = "btn btn-info"
                buttonact.innerHTML = "Actualizar"

                formact.appendChild(buttonact)
    
                td2.appendChild(formact)

                tr.appendChild(td2)


                //eliminar fila

                let td3 = document.createElement("td")
                var formdel = document.createElement("form");
                formdel.setAttribute("method", "delete");
                formdel.setAttribute("action", `https://shrouded-brushlands-49939.herokuapp.com/api/v1/categories/${e.id}`)
                let buttondel = document.createElement("button")
                buttondel.type = "submit"
                buttondel.className = "btn btn-danger"
                buttondel.innerHTML = "Eliminar"

                formdel.appendChild(buttondel)
    
                td3.appendChild(formdel)

                tr.appendChild(td3)


                
                table.appendChild(tr); //< --- Agregamos la fila a la tabla

            });
        })();
    </script>

<div class="container-sm">

<table class="table" id="productos">

        <tr>
            <td scope="col">#</td>
            <td scope="col">id</td>
            <td scope="col">categoria</td>
            <td scope="col">descripcion</td>
            <td scope="col">isblock</td>
            <td scope="col"> ver </td>
            <td scope="col"> actualizar</td>
            <td scope="col"> eliminar</td>
            <td scope="col"><a href="./../formularios/categories.html"> <button type="button" class="btn btn-success">Nuevo</button></a></td>
        </tr>

    </div>

</body>
</html>