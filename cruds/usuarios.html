<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

</head>
<body>
    <script>
        (async()=>{
            const response = await fetch('http://localhost:3000/api/v1/users');
            const data = await response.json();
            console.log(data);
            const table = document.getElementById("productos");
            data.forEach(element =>{

           
            data.forEach((e,i) => {    //< ---  recorremos data

                let tr = document.createElement("tr"); //< ---  creamos una fila

                let td = document.createElement("td"); //< ---  Hacemos columna index dentro de la fila
                td.classList.add("index");
                td.innerHTML = i;
                tr.appendChild(td); //< --- Agregamos la columna en la fila

              
                for (p in e) {  //< ---  recorremos cada propiedad de cada elemento

                let td = document.createElement("td"); //< ---  Hacemos columna dentro de la fila
                td.classList.add(p);//<-- le podemos agregar a toda la columna la misma clase
                td.innerHTML = e[p]; 

                tr.appendChild(td); //< --- Agregamos la columna en la fila

                }

                let td1 = document.createElement("td")
                var form = document.createElement("form");
                form.setAttribute("method", "get");
                let input = document.createElement("input")
                form.setAttribute("action", "http://localhost:3000/api/v1/users/")
                input.type = "hidden"
                input.value = element.id 
                input.name = "id"
                let button = document.createElement("button")
                button.type = "submit"
                button.innerHTML = "Ver usuario"

                form.appendChild(input);
                form.appendChild(button)
    
                td1.appendChild(form)

                tr.appendChild(td1)

                
                table.appendChild(tr); //< --- Agregamos la fila a la tabla

            });
        })
        })();
    </script>

<div class="container-sm">

<table class="table" id="productos">

        <tr>
            <td scope="col">#</td>
            <td scope="col">id</td>
            <td scope="col">nombre</td>
            <td scope="col">apellido</td>
            <td scope="col">email</td>
            <td scope="col">contrase√±a</td>
            <td scope="col">telefono</td>
            <td scope="col">isblock</td>
            <td scope="col"> ver </td>
        </tr>

    </div>

</body>
</html>